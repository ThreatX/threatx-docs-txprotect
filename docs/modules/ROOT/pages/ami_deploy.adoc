= AWS AMI Deployment Guide
:page-category: Guide
:page-edition: Enterprise
:product-name: TX Protect
:page-product-name:  {product-name}
:page-origin-type: git
:sectlinks:
:sectanchors:
:sectids:
:copyright: 2024 ThreatX, Inc.
:icons: font
:source-highlighter: highlightjs
:imagesdir: ../images




The ThreatX WAF Sensor AMI can be used to quickly and easily add application security to applications deployed in AWS VPCs. The AMI can be found by launching an instance and searching for “*ThreatX WAF*” when choosing an AMI.

image::image001-1024x745.png[image001-1024x745,width=1024,height=745]

.AMI Attributes
****
* Based on the latest (at the time of publishing) CentOS AMI
* Pulls the latest version of the txWAF Sensor container from Docker Hub at instance launch and on service restart
* Restarts the txWAF docker container if it stops
* Can be orchestrated via User-Data
****

== Launching the AMI


.Minimum Requirements
[horizontal]
CPU:: 2 cores 
RAM:: 1 GB
Disk:: 20 GB

TIP: An instance type of *t3.micro or larger* is recommended.


=== Configuration
In the simplest deployment, the AMI can be launched with the following User-Data information:

[source,yaml]
----
#cloud-config

write_files:
 - path: /etc/txconf
   content: |
     CUSTOMER=<customer_name>
     API_KEY=<customer_sensor_key>
     RESOLVER=local
     SENSOR_TAGS=tag1,tag2  # <1>
----
<1> You can set the `SENSOR_TAGS` variable to a comma delimited list of tags that can help you filter the sensors within the ThreatX Dashboard UI or API.


=== Troubleshooting


.Login as core user
[,console]
----
$ ssh -i sshkey.pem core@200.1.1.1
----

.Get root access.
[,console]
----
$ sudo su
----

.See the AMI version
[,console]
----
$ echo $TXWAF_AMI_VERSION
----

.Follow the CentOS system log
[,console]
----
$ journalctl -f
----

.See the ThreatX WAF docker container
[,console]
----
$ docker ps
----

.Get a shell into the ThreatX WAF container
[,console]
----
$ docker exec -it txwaf bash
----



